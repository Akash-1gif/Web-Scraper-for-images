<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Web Scraper for images</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
    <nav class="navbar bg-body-secondary">
        <div class="container-fluid">
          <span class="navbar-brand mb-0 h1"><h1>Web Scraper for images</h1></span>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="container mt-5">
            <h1 class="mb-4">Enter a Web Link</h1>
            <form id="scraperForm" onsubmit="submitForm(); return false;" method="post">
                <div class="form-group">
                    <label for="web_link">Web Link:</label>
                    <input type="text" class="form-control" id="web_link" name="web_link" required>
                </div>
                <button type="submit" class="btn btn-primary my-4">Submit</button>
            </form>
        </div>
        
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script>
        function showNotification(message) {
            // Create a Bootstrap toast element
            var toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `
                <div class="toast-header">
                    <strong class="me-auto">Notification</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body">${message}</div>
            `;
    
            // Append the toast to the body
            document.body.appendChild(toast);
    
            // Initialize the Bootstrap toast
            var bsToast = new bootstrap.Toast(toast);
    
            // Show the toast
            bsToast.show();
        }
    
        // Function to handle form submission and show notifications
        function submitForm() {
            var form = document.getElementById('scraperForm');
            var formData = new FormData(form);
    
            fetch('/result', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Show each message in a notification
                data.messages.forEach(message => {
                    showNotification(message);
                });
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('An error occurred. Please check the console for details.');
            });
        }
    </script>
    
  </body>
</html>
